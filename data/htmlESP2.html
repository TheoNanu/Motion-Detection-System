<html>
	<head>
	
	<script type = "text/javascript">var ws = new WebSocket("ws://192.168.0.104/ws"); </script>
		<script  src = "Chart.bundle.min.js" ></script>
		<script  src = "Gauge.js" ></script>
		<script  src = "ChartBuildFun.js"></script>
		<script  src = "InputBuildFun.js"></script>
		<link rel="stylesheet" type="text/css" href="cssDesignMotor.css">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		
		<title> Motor - Dashboard HRO-AE </title>
	</head>

	<header>

	</header>

	<body>
		<table class = "tableSlid">
		<tr>	
			<td><canvas id="rightLeft"></canvas></td>
			<td>
			<form>
			<label> Delay:</label>
			<input type="number" min="1" max="500" step="1" id = "delayBox" value = "50">
			<label> Left Median:</label>
			<input type="number"> <br><br>
			
			<label> Max distance right::</label>
			<input type="number" min="0" max="10000" step="0.1" id = "nBox" value = "4">
			<label> Max distance left:</label>
			<input type="number" min="0" max="10000" step="0.1" id = "nBox" value = "4">

			
			
			
			
			</form>
			</td>

		</tr>
		<tr>	
			<td><canvas id="senzor_right_normal" width="600" height="500"></canvas></td>
			<td><canvas id="senzor_right_filtrat"></canvas></td>
			<td><canvas id="Senzor_right_normat"></canvas></td>
		</tr>
		<tr>	
			<td><canvas id="senzor_left_normal"></canvas></td>
			<td><canvas id="senzor_left_filtrat"></canvas></td>
			<td><canvas id="Senzor_left_normat"></canvas></td>
			
			
		</tr>
		</table>
	</body>
</html>




<script type = "text/javascript">
Box("delayBox","n",1,500);
//Chart.defaults.global.legend.display = false;
//Chart.defaults.scale.ticks.display = false;

		var dataCurrent_1 = [42,61,24,-3,-12,-42];
		var dataCurrent_2 = [42,61,24,-3,-12,-42];
		var dataCurrent_3 = [42,61,24,-3,-12,-42];
		var dataVoltage_1 =[42,61,24,-3,-12,-42];
		var dataVoltage_2 = [1,32,24,-3,-42,-22];
		var dataVoltage_3 = [42,61,24,-3,-12,-42];
		var dataPower = [42,61,24,-3,-12,-42];
		var dataEfficiency = [];
		var time = [];
		var tim = 0;

	ws.onopen = function() 
	{
	   window.alert("Connected");
	};
	ws.onmessage = function(evt) 
	{
	if(evt.data[0] == 's')
	{
		var msg = evt.data.substring(1);
		var canMsg = msg.split(";");
		if (tim >49) 
		{
			dataCurrent_1.shift();
			dataCurrent_2.shift();
			dataCurrent_3.shift();
			dataVoltage_1.shift();
			dataVoltage_2.shift();
			dataVoltage_3.shift();
			dataPower.shift();
			dataEfficiency.shift();
		}
			dataCurrent_1.push(canMsg[0]);
			dataCurrent_2.push(canMsg[1]);
			dataCurrent_3.push(canMsg[2]);
			dataVoltage_1.push(canMsg[3]);
			dataVoltage_2.push(canMsg[4]);
			dataVoltage_3.push(canMsg[5]);
			dataPower.push(0);


		

			chartCurrent_1.update(0);
			chartCurrent_2.update(0);
			chartCurrent_3.update(0);
			chartVoltage_1.update(0);
			chartVoltage_2.update(0);
			chartVoltage_3.update(0);
			chartPower.update(0);

			tim = tim + 1;
	}

	};
	
	chartPower = chartBuildPower("rightLeft","RightLeft",dataCurrent_2,dataVoltage_2 );
	chartCurrent_1 =chartBuildPhase3("senzor_right_normal","Senzor Right Normal",dataCurrent_1);
	chartCurrent_2 =chartBuildPhase3("senzor_right_filtrat","Senzor Right Filtrat",dataCurrent_2);
	chartCurrent_3 =chartBuildPhase3("Senzor_right_normat","Senzor Right Normat",dataCurrent_3);
	
	chartVoltage_1 =chartBuildPhase3("senzor_left_normal","Senzor Left Normal",dataVoltage_1);
	chartVoltage_2 =chartBuildPhase3("senzor_left_filtrat","Senzor Left Filtrat",dataVoltage_2);
	chartVoltage_3 =chartBuildPhase3("Senzor_left_normat","Senzor Left Normat",dataVoltage_3);
	
	chartPower.update(0);
	chartCurrent_1.update(0);
	chartCurrent_2.update(0);
	chartCurrent_3.update(0);
	chartVoltage_1.update(0);
	chartVoltage_2.update(0);
	chartVoltage_3.update(0);
	

		
function chartBuildPhase1(canvasId, label, dataChart)
{
	var ctx = document.getElementById(canvasId);
	var chartName = new Chart(ctx, {
		  type: 'line',
		  options:{
		    tooltips: {enabled: false},
			hover: {mode: null},
			legend:
			{
				labels:{
				fontColor: "#202020",
				fontSize: 14,
				fontFamily: 'Helvetica Neue',
				}
			},
			  scales: 
			  {
				  xAxes: 
				[{
					ticks: 
					{
						display: false
					},
					gridLines: 
					{
						display:false
					}
				}],
				  yAxes: [{
                            display: true,
                            ticks: {
                                beginAtZero: true,
                                steps: 30,
                                stepValue: 5,
                                max: 300
                            }
                        }]
			}
		},
		  data: {
			labels: [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],
			datasets: [
			  { label: label,
				data: dataChart,
				borderColor: '1C4E80',
                backgroundColor: '#0091D5',
				cubicInterpolationMode:'monotone',
				lineTension:'0'
			  } 
			]
		  }
		});
		return chartName;
}

function chartBuildPhase2(canvasId, label, dataChart)
{
	var ctx = document.getElementById(canvasId);
	var chartName = new Chart(ctx, {
		  type: 'line',
		  options: 
{
		    tooltips: {enabled: false},
			hover: {mode: null},
			legend:
			{
				labels:{
				fontColor: "#202020",
				fontSize: 14,
				fontFamily: 'Helvetica Neue',
				}
			},
			  scales: 
			  {
				  xAxes: 
				[{
					ticks: 
					{
						display: false,
						min:0,
						max:100,
						stepSize:20
					},
					gridLines: 
					{
						display:false
					}
				}],
 yAxes: [{
                            display: true,
                            ticks: {
                                beginAtZero: true,
                                steps: 30,
                                stepValue: 5,
                                max: 300
                            }
                        }]
			}
		},
		  data: {
			labels: [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],
			datasets: [
			  { label: label,
				data: dataChart,
				borderColor: '1C4E80',
                backgroundColor: '#A5D8DD',
				cubicInterpolationMode:'monotone',
				lineTension:'0'
			  } 
			]
		  }
		});
		return chartName;
}

function chartBuildPhase3(canvasId, label, dataChart)
{
	var ctx = document.getElementById(canvasId);
	var chartName = new Chart(ctx, {
		  type: 'line',
            options: {
                responsive: true,
                legend: {
                    position: 'bottom',
                },
                hover: {
                    mode: 'label'
                },
                scales: {
                    xAxes: [{
                            display: false,
                            scaleLabel: {
                                display: true,
                                labelString: 'Month'
                            }
                        }],
                    yAxes: [{
                            display: true,
                            ticks: {
                                beginAtZero: true,
                                steps: 30,
                                stepValue: 5,
                                max: 300
                            }
                        }]
                },
                title: {
                    display: false,

                }
            },
		  data: {
			labels: [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],
			datasets: [
			  { label: label,
				data: dataChart,
				borderColor: '1C4E80',
                backgroundColor: '#EA6A47',
				cubicInterpolationMode:'monotone',
				lineTension:'0',
				fill:false,
			  },
			  
			]
		  }
		});
		return chartName;
}

function chartBuildPower(canvasId, label, dataChart1, dataChart2)
{var ctx = document.getElementById(canvasId);
	var chartName = new Chart(ctx, {
		  type: 'line',
            options: {
                responsive: true,
                legend: {
                    position: 'bottom',
                },
                hover: {
                    mode: 'label'
                },
                scales: {
                    xAxes: [{
                            display: false,
                            scaleLabel: {
                                display: true,
                                labelString: 'Month'
                            }
                        }],
                    yAxes: [{
                            display: true,
                            ticks: {
                                beginAtZero: true,
                                steps: 30,
                                stepValue: 5,
                                max: 300
                            }
                        }]
                },
                title: {
                    display: false,

                }
            },
		  data: {
			labels: [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50],
			datasets: [
			  { label: label,
				data: dataChart1,
				borderColor: '#FF0000',
                backgroundColor: '#FF0000',
				cubicInterpolationMode:'default',
				lineTension:'0',
				fill:false,
				pointRadius: 0,
			  },
			  { label: label,
				data: dataChart2,
				borderColor: '#0000FF',
                backgroundColor: '#0000FF',
				cubicInterpolationMode:'default',
				lineTension:'0',
				fill:false,
				pointRadius: 0,

			  }  
			]
		  }
		});
		return chartName;
}

</script>
